<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
	<head th:include="layout :: htmlhead">
	<body>
		<div class="container">
			<nav th:replace="layout :: menu">(menu)</nav>
			<table class="table" id="clientes">
				<thead class="thead-light"> 
				 
					<tr>
           			 <th>Id</th>
          			  <th>Nome</th>
          			  <th>Cpf</th>
          			  <th>E-mail</th>
          			  <th>Endereço</th>
          			  <th>Telefone</th>
          			  <th>Observações</th>
          			  <th>Status</th>
       			     <th></th>
        			</tr>
				</thead>
				<tbody>
				<tr scope ="row" th:each="umCliente : ${clientes}">
					<td th:text="${umCliente.id}"></td>
					<td th:text="${umCliente.nomeCliente}"></td>
					<td th:text="${umCliente.cpf}"></td>
					<td th:text="${umCliente.email}"></td>
					<td th:text="${umCliente.endereco}"></td>
					<td th:text="${umCliente.telefone}"></td>
					<td th:text="${umCliente.observacoes}"></td>
					<td th:text="${umCliente.status}"></td>
					<td><a th:href= "@{'/cliente/edit/' + ${umCliente.id}}" class="btn btn-primary btn-lg">Alterar</a>
					<button class='btn btn-danger btn-lg js-delete'
							th:data-customer-id="${umCliente.id}">Excluir</button>
					</td>
					</tr>
				</tbody>
			</table>
		</div>
		<div th:include="layout :: footer" id="footer">(footer)</div>
		<script type="text/javascript">
			$(document).ready(function(){
				$("#clientes").on("click",".js-delete", function(){
					var button = $(this);
					bootbox.confirm({
					    message: "Tem certeza que deseja excluir seu cadastro?",
					    buttons: {
					        confirm: {
					            label: 'Sim',
					            className: 'btn-success'
					        },
					        cancel: {
					            label: 'Não',
					            className: 'btn-danger'
					        }
					    },
					    callback: function (result) {
					    	if(result){
						    	$.ajax({
						    		url: "/cliente/delete/" +button.attr("data-customer-id"),
						    		method: "GET",
						    		success: function(){
						    			window.location.href="/cliente/"
						    		}
						    	})
						    }
					    }
					    
					});
				});
			});
		</script>
	</body>
</html>